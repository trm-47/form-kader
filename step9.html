<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Step 9 – Review & Kirim</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">

<div class="max-w-2xl mx-auto p-4">
  <div class="bg-white rounded-2xl shadow-xl p-6 space-y-6">
    <h2 class="text-lg font-bold text-center">Review & Kirim</h2>

    <div id="review"></div>

    <div class="flex gap-3 pt-2">
      <button onclick="editStep()" class="w-1/2 border py-3 rounded-xl font-semibold">✏️ Edit</button>
      <button onclick="kirim()" class="w-1/2 bg-red-700 text-white py-3 rounded-xl font-semibold">✅ Kirim Data</button>
    </div>
  </div>
</div>

<script>
const data = JSON.parse(localStorage.getItem("formKader") || "{}");
if (!data.nik) window.location.href = "step1.html";

const review = document.getElementById("review");

function buatList(title, items, fields) {
  const div = document.createElement("div");
  div.className = "space-y-2 border-b pb-2";

  const h = document.createElement("h3");
  h.className = "font-semibold text-gray-700";
  h.textContent = title;
  div.appendChild(h);

  if (Array.isArray(items) && items.length) {
    items.forEach((it, idx) => {
      const p = document.createElement("p");
      p.className = "text-sm text-gray-600";
      let teks = fields.map(f => `${f.label}: ${it[f.key] || "-"}`).join(" | ");
      p.textContent = `${idx+1}. ${teks}`;
      div.appendChild(p);
    });
  } else {
    div.appendChild(document.createElement("p")).textContent = "-";
  }

  return div;
}

// Data Pribadi
const pribadiDiv = document.createElement("div");
pribadiDiv.className = "space-y-2 border-b pb-2";
pribadiDiv.innerHTML = `<h3 class="font-semibold text-gray-700">Data Pribadi</h3>
<p class="text-sm text-gray-600">Nama: ${data.nama || "-"}</p>
<p class="text-sm text-gray-600">NIK: ${data.nik || "-"}</p>
<p class="text-sm text-gray-600">Nomor KTA: ${data.kta || "-"}</p>`;
review.appendChild(pribadiDiv);

// Alamat & Kontak
const alamatDiv = document.createElement("div");
alamatDiv.className = "space-y-2 border-b pb-2";
alamatDiv.innerHTML = `<h3 class="font-semibold text-gray-700">Alamat & Kontak</h3>
<p class="text-sm text-gray-600">Alamat: ${data.alamat || "-"}</p>
<p class="text-sm text-gray-600">RT/RW: ${data.rt || "-"} / ${data.rw || "-"}</p>
<p class="text-sm text-gray-600">Kelurahan: ${data.kelurahan || "-"}</p>
<p class="text-sm text-gray-600">Kecamatan: ${data.kecamatan || "-"}</p>
<p class="text-sm text-gray-600">Kabupaten/Kota: ${data.kabupaten || "-"}</p>
<p class="text-sm text-gray-600">HP: ${data.hp || "-"}</p>`;
review.appendChild(alamatDiv);

// Pendidikan Kader
review.appendChild(buatList("Pendidikan Kader", data.pendidikanKader, [
  {label:"Nama", key:"nama"}, {label:"Tahun", key:"tahun"}, {label:"Penyelenggara", key:"penyelenggara"}
]));

// Riwayat Jabatan Partai
review.appendChild(buatList("Riwayat Jabatan Partai", data.jabatanPartai, [
  {label:"Nama Jabatan", key:"nama"}, {label:"Tingkatan", key:"tingkatan"}, {label:"Periode", key:"periode"}
]));

// Riwayat Organisasi
review.appendChild(buatList("Riwayat Organisasi", data.organisasi, [
  {label:"Nama Organisasi", key:"nama"}, {label:"Jabatan", key:"jabatan"}, {label:"Tingkatan", key:"tingkatan"}, {label:"Periode", key:"periode"}
]));

// Kompetensi & Skill
const skillDiv = document.createElement("div");
skillDiv.className = "space-y-2 border-b pb-2";
skillDiv.innerHTML = `<h3 class="font-semibold text-gray-700">Kompetensi & Skill</h3>
<p class="text-sm text-gray-600">Bahasa: ${(data.skill?.bahasa || []).join(", ") || "-"}</p>
<p class="text-sm text-gray-600">Komputer: ${data.skill?.komputer || "-"}</p>`;
review.appendChild(skillDiv);

// Media Sosial
const medsosDiv = document.createElement("div");
medsosDiv.className = "space-y-2";
medsosDiv.innerHTML = `<h3 class="font-semibold text-gray-700">Media Sosial</h3>
<p class="text-sm text-gray-600">Instagram: ${data.medsos?.instagram || "-"}</p>
<p class="text-sm text-gray-600">Twitter/X: ${data.medsos?.twitter || "-"}</p>
<p class="text-sm text-gray-600">Facebook: ${data.medsos?.facebook || "-"}</p>
<p class="text-sm text-gray-600">TikTok: ${data.medsos?.tiktok || "-"}</p>`;
review.appendChild(medsosDiv);

// tombol
function editStep() {
  window.location.href = "step1.html";
}

function kirim() {
  alert("Data berhasil dikirim!\nLihat console untuk data JSON lengkap.");
  console.log("Data Kader:", data);
  localStorage.removeItem("formKader");
  window.location.href = "step1.html";
}
</script>

</body>
</html>
